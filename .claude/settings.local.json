{
  "permissions": {
    "allow": [
      "WebSearch",
      "Bash(npx create-expo-app@latest . --template expo-template-blank-typescript --yes)",
      "Bash(npx create-expo-app:*)",
      "Bash(npx expo install:*)",
      "Bash(npm install:*)",
      "Bash(node -e \"\nconst fs = require\\(''fs''\\);\nconst content = \\\\`import { useState } from ''react'';\nimport { View, StyleSheet, ScrollView, Alert, Linking } from ''react-native'';\nimport { Text, Surface, Switch, Button, TextInput, Divider, Avatar } from ''react-native-paper'';\nimport { SafeAreaView } from ''react-native-safe-area-context'';\nimport { useRouter } from ''expo-router'';\nimport { useSettingsStore, useAuthStore, useSyncStore } from ''../../src/stores'';\nimport { sheetsService } from ''../../src/services/google'';\n\nexport default function SettingsScreen\\(\\) {\n  const router = useRouter\\(\\);\n  const { unit, setUnit, sheetId, setSheetId, autoSync, setAutoSync } = useSettingsStore\\(\\);\n  const { user, accessToken, clearAuth } = useAuthStore\\(\\);\n  const { pendingCount, lastSyncAt } = useSyncStore\\(\\);\n  \n  const [sheetUrl, setSheetUrl] = useState\\(sheetId ? ''https://docs.google.com/spreadsheets/d/'' + sheetId : ''''\\);\n  const [isValidating, setIsValidating] = useState\\(false\\);\n\n  const handleUnitToggle = \\(\\) => {\n    setUnit\\(unit === ''kg'' ? ''lbs'' : ''kg''\\);\n  };\n\n  const handleConnectSheet = async \\(\\) => {\n    if \\(!sheetUrl.trim\\(\\)\\) {\n      Alert.alert\\(''Error'', ''Please enter a Google Sheet URL''\\);\n      return;\n    }\n    const extractedId = sheetsService.parseSheetIdFromUrl\\(sheetUrl\\);\n    if \\(!extractedId\\) {\n      Alert.alert\\(''Invalid URL'', ''Please enter a valid Google Sheets URL''\\);\n      return;\n    }\n    if \\(!accessToken\\) {\n      Alert.alert\\(''Not Signed In'', ''Please sign in first''\\);\n      return;\n    }\n    setIsValidating\\(true\\);\n    try {\n      const isValid = await sheetsService.validateSheet\\(accessToken, extractedId\\);\n      if \\(isValid\\) {\n        setSheetId\\(extractedId\\);\n        Alert.alert\\(''Success'', ''Google Sheet connected!''\\);\n      } else {\n        Alert.alert\\(''Access Denied'', ''Unable to access this sheet.''\\);\n      }\n    } catch \\(error\\) {\n      Alert.alert\\(''Error'', ''Failed to validate sheet.''\\);\n    } finally {\n      setIsValidating\\(false\\);\n    }\n  };\n\n  const handleCreateNewSheet = async \\(\\) => {\n    if \\(!accessToken\\) {\n      Alert.alert\\(''Not Signed In'', ''Please sign in first''\\);\n      return;\n    }\n    setIsValidating\\(true\\);\n    try {\n      const newSheetId = await sheetsService.createSheet\\(accessToken, ''WeightLog''\\);\n      setSheetId\\(newSheetId\\);\n      setSheetUrl\\(''https://docs.google.com/spreadsheets/d/'' + newSheetId\\);\n      Alert.alert\\(''Success'', ''New Google Sheet created!''\\);\n    } catch \\(error\\) {\n      Alert.alert\\(''Error'', ''Failed to create sheet.''\\);\n    } finally {\n      setIsValidating\\(false\\);\n    }\n  };\n\n  const handleSignOut = \\(\\) => {\n    Alert.alert\\(''Sign Out'', ''Are you sure?'', [\n      { text: ''Cancel'', style: ''cancel'' },\n      { text: ''Sign Out'', style: ''destructive'', onPress: async \\(\\) => {\n        await clearAuth\\(\\);\n        router.replace\\(''/\\(auth\\)/login''\\);\n      }},\n    ]\\);\n  };\n\n  return \\(\n    <SafeAreaView style={styles.container} edges={[''bottom'']}>\n      <ScrollView contentContainerStyle={styles.content}>\n        {user && \\(\n          <Surface style={styles.section} elevation={1}>\n            <View style={styles.userInfo}>\n              {user.picture ? \\(\n                <Avatar.Image size={48} source={{ uri: user.picture }} />\n              \\) : \\(\n                <Avatar.Text size={48} label={user.name[0]} />\n              \\)}\n              <View style={styles.userDetails}>\n                <Text variant=\"\"titleMedium\"\">{user.name}</Text>\n                <Text variant=\"\"bodySmall\"\" style={styles.email}>{user.email}</Text>\n              </View>\n            </View>\n          </Surface>\n        \\)}\n\n        <Surface style={styles.section} elevation={1}>\n          <Text variant=\"\"titleSmall\"\" style={styles.sectionTitle}>Weight Unit</Text>\n          <View style={styles.settingRow}>\n            <Text variant=\"\"bodyLarge\"\">Use Pounds \\(lbs\\)</Text>\n            <Switch value={unit === ''lbs''} onValueChange={handleUnitToggle} />\n          </View>\n        </Surface>\n\n        <Surface style={styles.section} elevation={1}>\n          <Text variant=\"\"titleSmall\"\" style={styles.sectionTitle}>Google Sheet</Text>\n          <TextInput\n            mode=\"\"outlined\"\"\n            label=\"\"Sheet URL\"\"\n            value={sheetUrl}\n            onChangeText={setSheetUrl}\n            style={styles.input}\n          />\n          <View style={styles.buttonRow}>\n            <Button mode=\"\"contained\"\" onPress={handleConnectSheet} loading={isValidating} disabled={isValidating} style={styles.button}>\n              Connect\n            </Button>\n            <Button mode=\"\"outlined\"\" onPress={handleCreateNewSheet} loading={isValidating} disabled={isValidating} style={styles.button}>\n              Create New\n            </Button>\n          </View>\n          {sheetId && \\(\n            <Button mode=\"\"text\"\" onPress={\\(\\) => Linking.openURL\\(''https://docs.google.com/spreadsheets/d/'' + sheetId\\)}>\n              Open Sheet\n            </Button>\n          \\)}\n        </Surface>\n\n        <Surface style={styles.section} elevation={1}>\n          <Text variant=\"\"titleSmall\"\" style={styles.sectionTitle}>Sync</Text>\n          <View style={styles.settingRow}>\n            <Text variant=\"\"bodyLarge\"\">Auto-sync</Text>\n            <Switch value={autoSync} onValueChange={setAutoSync} />\n          </View>\n          <Text variant=\"\"bodySmall\"\" style={styles.hint}>Pending: {pendingCount} entries</Text>\n        </Surface>\n\n        <Button mode=\"\"outlined\"\" onPress={handleSignOut} style={styles.signOutButton} textColor=\"\"#f44336\"\">\n          Sign Out\n        </Button>\n      </ScrollView>\n    </SafeAreaView>\n  \\);\n}\n\nconst styles = StyleSheet.create\\({\n  container: { flex: 1, backgroundColor: ''#f5f5f5'' },\n  content: { padding: 16 },\n  section: { padding: 16, borderRadius: 12, marginBottom: 16 },\n  sectionTitle: { color: ''#666'', marginBottom: 12, fontWeight: ''600'' },\n  userInfo: { flexDirection: ''row'', alignItems: ''center'' },\n  userDetails: { marginLeft: 16 },\n  email: { color: ''#666'' },\n  settingRow: { flexDirection: ''row'', justifyContent: ''space-between'', alignItems: ''center'' },\n  hint: { color: ''#999'', marginTop: 8 },\n  input: { marginBottom: 12 },\n  buttonRow: { flexDirection: ''row'', gap: 12 },\n  button: { flex: 1 },\n  signOutButton: { marginTop: 8, borderColor: ''#f44336'' },\n}\\);\n\\\\`;\nfs.writeFileSync\\(''C:/Vinod/Projects/WeightLog/app/\\(main\\)/settings.tsx'', content\\);\nconsole.log\\(''File written successfully''\\);\n\")",
      "Bash(node:*)",
      "Bash(echo:*)",
      "Bash(npx tsc:*)",
      "Bash(npx expo start:*)",
      "Bash(cat:*)",
      "Bash(curl:*)",
      "Bash(npx expo:*)",
      "Bash(keytool:*)",
      "Bash(keytool -list -v -keystore:*)"
    ]
  }
}
